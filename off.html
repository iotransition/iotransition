<html>
  <head>
    <style>
    body {
      margin: 1em auto;
      max-width: 45em;
      padding: 0.8em;
      background: white;
      text-align: center;
    }
    #onoff {
         height:170px;
         width:300px;
    }
    #slider {
         height:200px;
         width:300px;
    }
    </style>
    </head>
  
    <body onload="showValue(175)">
      
    
        
    <h1>OFF</h1>
    
    <input id = "slider" input type="range" min="20" max="155" value="0" onchange="showValue(this.value)" style="font-size:25px" />
    <span id="range">0</span>
    
    <script type="text/javascript">
    function showValue(newValue) {
      document.getElementById("range").innerHTML=newValue;
      slider.value = newValue;
      var request = new XMLHttpRequest();
      var dev_id = "2d002f000547343339373536";
      var access = "c4889b75e756973ef6bded5ffa32f5e590833e89";
      var data = 'params='+newValue+'&access_token='+access;
      var url = 'https://api.particle.io/v1/devices/'+dev_id+'/setpos/';
    //   var getFunc = "getpos";
      request.open('POST', url, true);
      request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
      request.send(data);
    //   window.setInterval(function() {
    //     requestURL = "https://api.particle.io/v1/devices/" + dev_id + "/" + getFunc + "/&access_token=" + access;
    //     $.getJSON(requestURL, function(json) {
    //              document.getElementById("curPos").innerHTML = json.result + "&deg;";
    //              document.getElementById("curPos").style.fontSize = "28px";
    //              document.getElementById("degBoxId").value = parseInt(json.result);
    //              });
    //   }, 1000);
    }
    </script>
  </body>
</html>



<!--Servo serv;
int pos = 0;

void setup() {
    serv.attach(D0);
    Spark.function("setpos", setPos);
    Spark.variable("getpos", &pos, INT);
}

void loop() {
}

int setPos(String pstn) {
    pos = pstn.toInt();
    serv.write(pos);
    return pos;
}-->
